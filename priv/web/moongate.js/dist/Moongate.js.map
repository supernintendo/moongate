{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6b7dc9d51db351e02118","webpack:///./src/Client.ts","webpack:///./src/network/Atlas.ts","webpack:///./src/Environment.ts","webpack:///./src/network/HTTPRequest.ts","webpack:///./src/session/Session.ts","webpack:///./src/session/EventHandler.ts","webpack:///./src/Utility.ts","webpack:///./src/session/Events.ts","webpack:///./src/network/Packets.ts","webpack:///./src/session/GameLoop.ts","webpack:///./src/session/Zone.ts","webpack:///./src/session/Ring.ts","webpack:///./src/session/RingMember.ts","webpack:///./src/network/Socket.ts"],"names":[],"mappings":"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","file":"Moongate.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Moongate\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Moongate\"] = factory();\n\telse\n\t\troot[\"Moongate\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6b7dc9d51db351e02118","import { Atlas } from './network/Atlas';\nimport { Config } from './Config';\nimport { Packet } from './network/Packet';\nimport { Session } from './session/Session';\nimport { Socket } from './network/Socket';\nimport { Utility } from './Utility';\n\nexport class Client {\n  Utility: Utility\n  atlas: Atlas\n  config: Config\n  name: String\n  session: Session\n  socket: Socket\n  constructor(config: Object) {\n    this.Utility = Utility;\n    this.config = config || {};\n    this.atlas = new Atlas(this);\n    this.session = new Session(this);\n\n    return this;\n  }\n  init() : boolean {\n    this.socket = new Socket(this);\n\n    if (this.config.onConnect) {\n      this.config.onConnect.apply(this);\n    }\n    return true;\n  }\n  send(packet: Packet) {\n    return this.socket.send(packet);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/Client.ts","import { Client } from '../Client';\nimport { Config } from '../Config'\nimport { Environment } from '../Environment'\nimport { HTTPRequest } from './HTTPRequest'\n\nexport class Atlas {\n  _: Client\n  ip: string\n  packet: any\n  port: Number\n  rings: any\n  version: String\n  zones: Object\n  constructor(context: Client) {\n    this._ = context;\n    this.fetch(context.init.bind(context), context.config);\n  }\n  endpoint(config: Config): string {\n    if (config.socketAddress) {\n      return config.socketAddress;\n    } else {\n      let hostname: string = config.origin || Environment.localHostname(),\n          port: string = config.port || Environment.localPort(),\n          protocol: string = config.port || Environment.localProtocol();\n\n      return `${protocol}//${hostname}:${port}/atlas`;\n    }\n  }\n  fetch(callback: Function, config: Config): boolean {\n    return HTTPRequest.fetch(\n      this.endpoint(config),\n      'json',\n      this.done.bind(this, callback)\n    );\n  }\n  done(callback: Function, response: any) {\n    this.ip = response.ip;\n    this.packet = response.packet;\n    this.port = response.port;\n    this.rings = response.rings;\n    this.version = response.version;\n    this.zones = response.zones;\n    callback();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/network/Atlas.ts","export class Environment {\n  // Executes one of two callbacks depending on the execution\n  // environment. If Moongate is running in a web browser, the\n  // first callback is called. If Moongate is running in Node.js,\n  // the second callback is called. An exception is thrown if\n  // the execution callback is not one of these two.\n  static callByContext(browserCallback: Function, nodeCallback: Function) {\n    switch (Environment.context()) {\n      case 'browser':\n        return browserCallback();\n      case 'node':\n        return nodeCallback();\n      default:\n        throw Environment.contextError();\n    }\n  }\n  static context() {\n    let isBrowser: Function = new Function('try { return this === window; } catch(e) { return false; }'),\n        isNode: Function = new Function('try { return this === global; } catch(e) { return false; }');\n\n    if (isBrowser()) {\n      return 'browser';\n    } else if (isNode()) {\n      return 'node';\n    }\n    return 'unknown;'\n  }\n  static contextError() {\n    return 'Unknown Executation Context';\n  }\n  static localHostname() {\n    return Environment.callByContext(\n      () => { return window.location.hostname },\n      () => { return ''; }\n    );\n  }\n  static localPort() {\n    return Environment.callByContext(\n      () => { return window.location.port },\n      () => { return ''; }\n    );\n  }\n  static localProtocol() {\n    return Environment.callByContext(\n      () => { return window.location.protocol },\n      () => { return ''; }\n    );\n  }\n  static viewport() {\n    return {\n      width: window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\n      height: window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/Environment.ts","import { Environment } from '../Environment';\n\nexport class HTTPRequest {\n  static fetch(url: string, type: string, callback: Function): boolean {\n    Environment.callByContext(\n      () => {\n        var req = new XMLHttpRequest();\n\n        req.onreadystatechange = function() {\n          if (this.readyState === 4 && this.status === 200) {\n            switch(type) {\n              case 'json':\n                return callback(JSON.parse(this.response));\n              default:\n                return callback(this.response);\n            }\n          }\n        };\n        req.open('GET', url, true);\n        req.send();\n      },\n      () => {}\n    );\n    return true;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/network/HTTPRequest.ts","import { Client } from '../Client';\nimport { Handler } from './EventHandler';\nimport { Loop } from './GameLoop';\nimport { Ring } from './Ring';\nimport { Packet } from '../network/Packet';\nimport { Zone } from './Zone';\n\nexport class Session {\n  _: Client\n  attached: any\n  loop: Loop\n  handler: Handler\n  ping: number\n  zones: any\n  constructor(context: Client) {\n    this._ = context;\n    this.attached = {};\n    this.loop = new Loop(this);\n    this.handler = new Handler(this._.config);\n    this.zones = {};\n  }\n  handle(packet: Packet) {\n    this.handler.callback(packet.handler, packet, this);\n  }\n  destroyMembers(memberIndices: Array<number>, zone: string, zoneName: string, ring: string) : any {\n    if (!this.zones[zone]) { return []; }\n    if (!this.zones[zone][zoneName]) { return []; }\n    if (!this.zones[zone][zoneName].rings[ring]) { return []; }\n\n    this.zones[zone][zoneName].rings[ring].destroyMembers(memberIndices);\n\n    return {\n      indices: memberIndices,\n      ring: ring\n    };\n  }\n  destroyZone(zone: string, zoneName: string) {\n    if (!this.zones[zone]) { return false; }\n    if (!this.zones[zone][zoneName]) { return false; }\n\n    delete this.zones[zone][zoneName];\n\n    return true;\n  }\n  upsertMembers(members: Array<any>, zone: string, zoneName: string, ring: string) {\n    this.upsertRing(zone, zoneName, ring);\n\n    return this.zones[zone][zoneName].rings[ring].upsertMembers(members);\n  }\n  upsertMorphs(morphs: Array<any>, zone: string, zoneName: string, ring: string) {\n    this.upsertRing(zone, zoneName, ring);\n\n    return this.zones[zone][zoneName].rings[ring].upsertMorphs(morphs);\n  }\n  upsertZone(zone: string, zoneName: string) {\n    if (!this.zones[zone]) {\n      this.zones[zone] = {};\n    }\n    if (!this.zones[zone][zoneName]) {\n      this.zones[zone][zoneName] = new Zone();\n    }\n    return this.zones[zone][zoneName];\n  }\n  upsertRing(zone: string, zoneName: string, ring: string) {\n    this.upsertZone(zone, zoneName);\n    if (!this.zones[zone][zoneName].rings[ring]) {\n      this.zones[zone][zoneName].addRing(ring, this._.atlas.rings[ring] || {});\n\n      return this.zones[zone][zoneName].rings[ring];\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/session/Session.ts","import { Config } from '../Config';\nimport { Packet } from '../network/Packet';\nimport { Session } from './Session';\nimport { Utility } from '../Utility';\nimport Events from './Events';\n\nexport class Handler {\n  callbacks: any\n  clientCallbacks: any\n  constructor(config: Config) {\n    this.callbacks = Events;\n    this.clientCallbacks = config.callbacks || {};\n  }\n  callback(callbackKey: string, packet: Packet, session: Session) {\n    let key = Utility.camelize(callbackKey);\n\n    if (this.callbacks[key] && this.callbacks[key] instanceof Function) {\n      let result = this.callbacks[key].call(this, packet, session);\n\n      if (this.clientCallbacks[key] && this.clientCallbacks[key] instanceof Function) {\n        return this.clientCallbacks[key].apply(this, [result]);\n      }\n      return result;\n    }\n    return null;\n  }\n  clientCallback(key: string, args: any, session: Session) {\n    if (this.clientCallbacks[key] && this.clientCallbacks[key] instanceof Function) {\n      return this.clientCallbacks[key].apply(this, args.concat(session));\n    }\n    return null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/session/EventHandler.ts","import { Environment } from './Environment';\n\ninterface HtmlEntities {\n  '&': string;\n  '<': string;\n  '>': string;\n  '\"': string;\n  '\\'': string;\n  '/': string;\n  '`': string;\n  '=': string;\n  [key: string]: string;\n}\nconst htmlEntities : HtmlEntities = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&#39;',\n  '/': '&#x2F;',\n  '`': '&#x60;',\n  '=': '&#x3D;'\n}\n\nexport class Utility {\n  static camelize(input: string) {\n    return input.replace(/(\\_\\w)/g, (m) => m[1].toUpperCase());\n  }\n  static capitalize(input: string) {\n    return input.charAt(0).toUpperCase() + input.slice(1);\n  }\n  static escapeHtml(input: string) {\n    return String(input).replace(/[&<>\"'`=\\/]/g, function (chunk: string) {\n      return htmlEntities[chunk];\n    });\n  }\n  static numberToHex(number: number, padding: number) {\n    return (number + Math.pow(16, padding)).toString(16).slice(-padding).toUpperCase();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/Utility.ts","import { Packet } from '../network/Packet';\nimport { Packets } from '../network/Packets';\nimport { Session } from './Session';\n\nexport default {\n  attach(packet: Packet, session: Session) {\n    let [key, value] = Packets.decodePair(packet.body);\n\n    session.attached[key] = value;\n    return value;\n  },\n  command(packet: Packet, session: Session) {\n    let [callbackKey, args] = Packets.decodePair(packet.body);\n\n    return session.handler.clientCallback(\n      callbackKey,\n      JSON.parse(args),\n      session\n    );\n  },\n  dropMembers(packet: Packet, session: Session) {\n    let results = Packets.decodeList(packet.body).map(Packets.decodeInt),\n        [zone, zoneName] = packet.zone;\n\n    return session.destroyMembers(results, zone, zoneName, packet.ring);\n  },\n  echo(packet: Packet, session: Session) {\n    console.log(`🔮 ${packet.body}`);\n\n    return packet.body;\n  },\n  leave(packet: Packet, session: Session) {\n    let [zone, zoneName] = packet.zone;\n\n    return session.destroyZone(zone, zoneName);\n  },\n  join(packet: Packet, session: Session) {\n    let [zone, zoneName] = packet.zone;\n\n    return session.upsertZone(zone, zoneName);\n  },\n  ping(packet: Packet, session: Session) {\n    let ping = new Date().getTime() - Packets.decodeInt(packet.body);\n\n    session.ping = ping;\n    return session.ping;\n  },\n  indexMembers(packet: Packet, session: Session) : any {\n    let [zone, zoneName] = packet.zone,\n        ring = packet.ring;\n\n    if (session._.atlas.rings[ring]) {\n      let schema = session._.atlas.rings[ring],\n          schemaKeys = Object.keys(schema),\n          results = Packets.decompressMap(packet.body, schemaKeys);\n\n      session.upsertZone(zone, zoneName)\n      return session.upsertMembers(results, zone, zoneName, ring);\n    }\n    return null;\n  },\n  showMembers(packet: Packet, session: Session) : any {\n    let [zone, zoneName] = packet.zone,\n        chunks = packet.body.split(/:(.+)/),\n        ring = packet.ring;\n\n    if (session.zones[zone] && session.zones[zone][zoneName] && session.zones[zone][zoneName].rings[ring]) {\n      let schema = Packets.decompressSchemaKeys(chunks[0], session._.atlas.packet.compressor),\n          results = Packets.decompressMap(chunks[1], schema);\n\n      return session.upsertMembers(results, zone, zoneName, ring);\n    }\n    return null;\n  },\n  showMorphs(packet: Packet, session: Session) : any {\n    let results = Packets.decompressMorphs(packet.body, session._.atlas.packet.compressor),\n        [zone, zoneName] = packet.zone;\n\n    return session.upsertMorphs(results, zone, zoneName, packet.ring);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/session/Events.ts","import { Packet } from './Packet';\nimport { Utility } from '../Utility';\n\nexport class Packets {\n  static decode(packet: string, packetCompressor: any) : Packet {\n    return Packets.decompressPacket({\n      body: Packets.splitChunk(packet, 'body'),\n      handler: Packets.matchChunk(packet, 'handler'),\n      raw: packet,\n      ring: Packets.matchChunk(packet, 'ring'),\n      rule: Packets.matchChunk(packet, 'rule'),\n      zone: Packets.matchChunk(packet, 'zone')\n    }, packetCompressor);\n  }\n  static encode(packet: Packet, packetCompressor: any) : string {\n    return (\n      '#' +\n      Packets.encodeChunk(packet.handler, '[', ']', packetCompressor) +\n      Packets.encodeChunk(packet.zone, '(', ')', packetCompressor) +\n      Packets.encodeChunk(packet.ring, '{', '}', packetCompressor) +\n      Packets.encodeChunk(packet.rule, '<', '>', packetCompressor) +\n      Packets.encodeBody(packet.body)\n    );\n  }\n  static matchChunk(packet: string, key: string) : any {\n    var match = packet.match(Packets.patterns()[key]);\n\n    if (match && match[0]) {\n      let parts: Array<string> = match[1].split(':');\n\n      if (parts.length === 1) {\n        return parts[0];\n      }\n      return parts;\n    }\n    return null;\n  }\n  static patterns() : any {\n    return {\n      body: /::(.+)?/,\n      handler: /\\[(.*?)\\]/,\n      ring: /{(.*?)}/,\n      rule: /<(.*?)>/,\n      zone: /\\((.*?)\\)/\n    }\n  }\n  static compressChunk(chunk: string, packetCompressor: any) {\n    return packetCompressor.by_word[chunk] || chunk;\n  }\n  static encodeBody(body: any) {\n    if (body) {\n      if (body instanceof Array) {\n        return `::${body.join('|')}`;\n      } else if (body instanceof Object) {\n        return `::${JSON.stringify(body)}`;\n      }\n      return `::${body}`;\n    }\n    return '';\n  }\n  static encodeChunk(chunk: any, left: string, right: string, packetCompressor: any) : string {\n    if (chunk instanceof Array) {\n      return Packets.wrapChunk(\n        chunk.map((c : string) => {\n          return Packets.compressChunk(c, packetCompressor);\n        }), left, right\n      );\n    } else if (chunk) {\n      return Packets.wrapChunk(Packets.compressChunk(chunk, packetCompressor), left, right);\n    }\n    return '';\n  }\n  static splitChunk(chunk: string, patternKey: string) : string {\n    var match = chunk.split(Packets.patterns()[patternKey]);\n\n    return match.slice(1).join('');\n  }\n  static wrapChunk(chunk: any, left: string, right: string) : string {\n    if (chunk instanceof Array) {\n      return `${left}${chunk.join(':')}${right}`;\n    }\n    return `${left}${chunk}${right}`;\n  }\n  static decodeInt(string: string) : number {\n    return parseInt(string, 10);\n  }\n  static decodeList(string: string) : string[] {\n    return string.split(',');\n  }\n  static decodePair(string: string) : any {\n    return string.split(/:(.+)/).slice(0, 2);\n  }\n  static decompressPacket(packet: Packet, packetCompressor: any) : Packet {\n    return {\n      body: packet.body,\n      handler: Packets.decompressField(packet.handler, packetCompressor),\n      ring: Packets.decompressField(packet.ring, packetCompressor),\n      rule: Packets.decompressField(packet.rule, packetCompressor),\n      zone: Packets.decompressZone(packet.zone, packetCompressor)\n    };\n  }\n  static decompressField(field: string, packetCompressor: any) : string {\n    return packetCompressor.by_token[field] || field;\n  }\n  static decompressZone(zoneField: any, packetCompressor: any) : any {\n    if (zoneField instanceof Array && zoneField.length == 2) {\n      return [\n        Packets.decompressField(zoneField[0], packetCompressor),\n        zoneField[1]\n      ];\n    } else if (zoneField) {\n      return Packets.decompressField(zoneField, packetCompressor);\n    }\n    return null;\n  }\n  static decompressSchemaKeys(schemaString: string, packetCompressor: any) : string[] {\n    return schemaString.split('|').map((token : string) => packetCompressor.by_token[token]);\n  }\n  static decompressMap(mapString: string, schemaKeys: string[]) : any[] {\n    let chunks : any[] = mapString.split('&'),\n        keys = schemaKeys.sort(),\n        members = chunks.map((chunk : string) => chunk.split('|')),\n        results : any[] = [];\n\n    for (let i = 0, l = chunks.length; i !== l; i++) {\n      let result : any = {};\n\n      for (let j = 0, k = keys.length; j !== k; j++) {\n        result[keys[j]] = members[i][j];\n      }\n      results.push(result);\n    }\n    return results;\n  }\n  static decompressMorphs(body: string, packetCompressor: any) : any[] {\n    let results : any[] = (\n      body.split('&')\n          .map((chunk) => chunk.split(':'))\n          .map((chunk) => {\n            let [selector, tweenChunk] = chunk,\n                [rule, key, index] = selector.split('|'),\n                tween = Packets.decompressTween(tweenChunk);\n\n              if (tween) {\n                return {\n                  index: parseInt(index, 10),\n                  rule: packetCompressor.by_token[rule],\n                  tween: tween,\n                  key: packetCompressor.by_token[key]\n                };\n              }\n          })\n          .filter((result) => !!result)\n    );\n\n    return results;\n  }\n  static decompressTween(body: string) : any {\n    let result = body.match(/(?:~([0-9]+)[d]([-+]?[0-9]+)~([0-9]+))/);\n\n    if (result && result[1] && result[2] && result[3]) {\n      return {\n        startedAt: parseInt(result[1], 10),\n        amount: parseInt(result[2], 10),\n        interval: parseInt(result[3], 10)\n      };\n    }\n    return null;\n  }\n  static isKeyValue(body: string) : Boolean {\n    return false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/network/Packets.ts","import { Environment } from '../Environment';\nimport { Session } from './Session';\n\nexport class Loop {\n  _: Session\n  queue: Array<any>\n  constructor(context: Session) {\n    this._ = context;\n    this.queue = [];\n\n    Environment.callByContext(\n      () => { this.browserLoop() },\n      () => { this.nodeLoop() }\n    )\n  }\n  browserLoop() {\n    if (this.queue.length === 0) {\n      return window.requestAnimationFrame(this.browserLoop.bind(this));\n    }\n    return window.requestAnimationFrame(this.browserLoop.bind(this));\n  }\n  nodeLoop() {\n  }\n  push(element: any) {\n    this.queue.push(element);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/session/GameLoop.ts","import { Ring } from './Ring';\n\nexport class Zone {\n  rings: any\n  constructor() {\n    this.rings = {};\n  }\n  addRing(name: string, schema: any) {\n    this.rings[name] = new Ring(name, schema);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/session/Zone.ts","import { RingMember } from './RingMember';\n\nexport class Ring {\n  indices: Array<number>\n  members: Array<RingMember>\n  morphs: any\n  name: string\n  schema: any\n  constructor(name: string, schema: any) {\n    this.indices = [];\n    this.members = [];\n    this.morphs = {};\n    this.name = name;\n    this.schema = schema\n  }\n  refreshIndices() {\n    let result : Array<number> = [];\n\n    for (let i = 0, l = this.members.length; i !== l; i++) {\n      result.push(this.members[i].index());\n    }\n    this.indices = result;\n  }\n  destroyMembers(memberIndices: Array<number>) {\n    this.members = this.members.filter((member) => {\n      return memberIndices.indexOf(member.index()) == -1;\n    });\n    this.refreshIndices();\n\n    return memberIndices;\n  }\n  upsertMembers(membersParams: Array<any>) {\n    return membersParams.map((memberParams: any) => this.upsertMember(memberParams));\n  }\n  upsertMember(memberParams: any) : any {\n    let index = parseInt(memberParams.__index__, 10),\n        memberIndex = this.indices.indexOf(index);\n\n    if (memberIndex > -1) {\n      return this.updateMember(memberIndex, memberParams);\n    }\n    return this.insertMember(memberParams);\n  }\n  upsertMorphs(morphs: Array<any>) {\n    return morphs.map((morph: any) => this.upsertMorph(morph));\n  }\n  upsertMorph(morph: any) {\n    if (!this.morphs[morph.rule]) { this.morphs[morph.rule] = {}}\n    if (!this.morphs[morph.rule][morph.key]) {\n      this.morphs[morph.rule][morph.key] = {\n        morphs: {}\n      }\n    }\n    this.morphs[morph.rule][morph.key].morphs[morph.index] = morph.tween;\n  }\n  updateMember(memberIndex : number, params : any) {\n    let member = this.members[memberIndex];\n\n    Object.keys(this.schema).forEach((key) => {\n      if (params[key]) {\n        member.setAttribute(key, Ring.castMemberValue(params[key], this.schema[key]));\n      }\n    })\n    this.refreshIndices();\n    return member;\n  }\n  insertMember(params: any) {\n    let result : any = {};\n\n    Object.keys(this.schema).forEach((key) => {\n      if (params[key]) {\n        result[key] = Ring.castMemberValue(params[key], this.schema[key]);\n      }\n    })\n    let member = new RingMember(result, this);\n    this.members.push(member);\n    this.refreshIndices();\n    return member;\n  }\n  static castMemberValue(value: any, type: string) : any {\n    switch (type) {\n      case 'Integer':\n        return parseInt(value, 10);\n      case 'Morphs':\n        return JSON.parse(value);\n      default:\n        return value;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/session/Ring.ts","import { Ring } from './Ring'\nimport { RingLink } from './RingLink'\n\nexport class RingMember {\n  _: Ring\n  attributes: any\n  links: Array<RingLink>\n  isNew: boolean\n  constructor(attributes: any, context: Ring) {\n    this._ = context;\n    this.attributes = attributes;\n    this.isNew = true;\n  }\n  index() {\n    return this.attributes.__index__;\n  }\n  setAttribute(key : string, value : any) {\n    this.attributes[key] = value;\n    this.isNew = false;\n  }\n  morphed() {\n    let index = this.index(),\n        result = this.attributes,\n        keys = Object.keys(this.attributes),\n        now = new Date();\n\n    for (let i = 0, l = keys.length; i !== l; i++) {\n      let ruleKeys = Object.keys(this._.morphs);\n\n      for (let j = 0, k = ruleKeys.length; j !== k; j++) {\n        let morph = this._.morphs[ruleKeys[j]];\n\n        if (morph[keys[i]] && morph[keys[i]].morphs && morph[keys[i]].morphs[index]) {\n          let memberMorph = morph[keys[i]].morphs[index],\n              delta = (now.getTime() - memberMorph.startedAt) * memberMorph.amount / memberMorph.interval;\n\n          result[keys[i]] = result[keys[i]] + delta;\n        }\n      }\n    }\n    return result;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/session/RingMember.ts","import { Atlas } from './Atlas';\nimport { Client } from '../Client';\nimport { Environment } from '../Environment';\nimport { Packets } from './Packets';\nimport { Packet } from './Packet';\n\nexport class Socket {\n  _: Client\n  packetCompressor: any\n  protocol: string\n  ws: WebSocket\n  constructor(context: Client) {\n    this._ = context;\n    this.packetCompressor = context.atlas.packet.compressor;\n    this.connect();\n  }\n  connect() {\n    Environment.callByContext(\n      () => {\n        this.protocol = 'ws';\n        this.ws = new WebSocket('ws://' + this._.atlas.ip + ':' + this._.atlas.port + '/ws');\n        this.ws.onopen = this.onWsOpen.bind(this);\n        this.ws.onmessage = this.onWsMessage.bind(this);\n        this.ws.onclose = this.onWsClose.bind(this);\n      },\n      () => {}\n    );\n  }\n  onWsOpen() {\n    this.send({\n      handler: 'begin'\n    });\n  }\n  onWsMessage(message: MessageEvent) {\n    this._.session.handle(Packets.decode(message.data, this.packetCompressor));\n  }\n  onWsClose() {\n  }\n  send(packet: Packet) {\n    if (this.protocol === 'ws') {\n      this.ws.send(Packets.encode(packet, this.packetCompressor));\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./src/network/Socket.ts"],"sourceRoot":""}